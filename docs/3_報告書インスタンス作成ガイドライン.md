## 「報告書インスタンス作成ガイドライン」より抜粋
### 1章 報告書インスタンスの概要
- 提出書類の全体像
  - EDINETを用いて有価証券報告書等をXBRL形式により提出する場合
    - 提出者別タクソノミ、報告書インスタンスおよびマニュフェストファイルの作成が必要
- 提出者別タクソノミ
  - EDINETで扱うXBRLのタクソノミ
    - 金融庁が提供するEDINETタクソノミ
    - EDINETタクソノミをベースタクソノミとして提出者が拡張する提出者別タクソノミ。必ず作成する
- 報告書インスタンス
  - 報告書内容（報告内容そのもの）を記載したファイル
  - 項目の値、コンテキスト、通貨単位等を定義する。また提出者別タクソノミへの参照を設定する
- 報告書インスタンスの作成単位
  - 一つの報告書インスタンス（有価証券報告書等）は一つの提出者別タクソノミを参照する
- XBRLファイルの作成について
  - 報告書インスタンスは「インラインXBRL」形式で作成する > インラインXBRLファイル
  - インラインXBRLは、XBRL形式のインスタンス中で表現する要素を、XHTMLファイルに直接埋め込むことができる
  - ブラウザで表示できる一方で、XBRLデータを利用して分析する場合に容易に利用および加工ができる
  - 報告書インスタンスの全体像
    - 表紙のインラインXBRLファイル
    - 本文のインラインXBRLファイル（任意の複数のファイルに分けることができる）
- マニュフェストファイル
  - 提出書類ファイル構成の情報を定義するファイル
  - 縦覧用、独立監査法人の報告書用および非縦覧用の3種類がある
  - 様式ツリー、インラインXBRLファイル名、変換後のXBRLインスタンスファイル名、目次の差し込み位置等が確認できる

### 2章 報告書インスタンスの作成プロセス
- 報告書インスタンスの作成
  - コンテキストおよびユニットの定義
  - DEIの内容を記載
  - 報告する値や内容の記載
  - 添付ファイル等の作成
- マニュフェストファイルの作成

### 3章 報告書インスタンスの作成前の準備
- インラインXBRL分割時の注意
  - インラインXBRLファイルには、一つ以上の隅付き括弧【】目次を含む必要がある

### 4章 報告書インスタンスのファイル仕様
- 報告書インスタンスには、提出者別タクソノミの参照、ユニットの定義、コンテキストの定義およびDEIを設定する
  - 提出書類本文全体の場合、表紙ファイルに定義
  - 財務諸表本表のみの場合、本表の一つ目のファイルに定義
- DEIの設定、提出者別タクソノミの参照、コンテキスト定義、ユニット定義は<ix:header>タグ内に指定
  - コンテキストの定義 > 報告する会計年度、報告主体などの定義
  - ユニットの定義 > 報告する通貨、株数等の単位を定義
- 財務諸表本表のみタグ付け対象とする場合、表紙のインラインXBRLファイルは作成しない
  - メモ：以下でソースコードに落とし込みできそう
    - 表紙のインラインファイルあり > ここからタグ情報を取得
    - 表紙のインラインファイルなし > 本表の一つ目のファイルからタグ情報を取得

- 表紙ファイル名は、先頭の7桁数値と6文字が「0000000_header」と決まっている（0000000も固定らしい）ｘ
  - 先頭文字と、拡張子「_ixbrl.htl」で表紙ファイルを特定できそう
  - ファイル名の先頭7桁について > p19
  - 本文の最初のファイルは「0101」は固定、多くは「0101010」になりそうだが断定はできない
    - 010101でいけるかも？
    - 0101が複数あるかどうかでロジック組む？

- XBRLインスタンスファイル（.xbrl）
    - インラインXBRLファイルをEDINET登録することで自動生成される
    - メモ：これを見れば必要な情報全部あるかも？ただし容量が大きい

### 5章 報告書インスタンスの作成
- 報告書インスタンスは、XHTMLファイルにXBRLインスタンス中で表される要素を埋め込み、インラインXBRLファイルを作成する
  - インラインXBRLでは、原則すべての値をタグ付けする
  - 拡張子は「.htm」を指定する
- 名前空間プレフィックスと名前空間URI（p27）
- タクソノミの参照
  - 報告書インスタンスは、必ず提出者別タクソノミを参照する
  - スキーマファイルの参照 > schemaRef要素で指定
  - 拡張リンクロールの参照 > roleRef要素で指定
    - 拡張リンクロールの参照は、フットノートリンクでのみ使用できる

- コンテキストの定義
  - 報告書インスタンスのコンテキストでは以下を設定。シナリオ要素は必要な場合のみ
    - id属性: コンテキストIDを設定
    - entity要素: スキームおよび識別子を設定
    - period要素: 期間および時点を設定
    - scenario要素: ディメンションを使用する場合、軸とメンバーの情報を設定
  - ※報告書インスタンス内で使用しないコンテキストは定義しない
  - コンテキストIDの命名規約 > p31
  - エンティティ要素
    - スキーム（scheme）: EDINETタクソノミのURIを指定
    - 識別子（identifier）: EDINETコードまたはファンドコードを指定
    - セグメント（segment）: 指定しない
  - 期間時点要素（period）> YYYY-MM-DD形式
    - 期間
      - 期首日または期間の開始日「startDate」: 報告する会計期間の期首日
      - 期末日または期間の終了日「endDate」: 報告する会計期間の期末日
    - 時点「instant」: 報告する会計期間の期末日、提出日等
    - ※DEIに定義する当事業年度開始日、当会計期間終了日などとperiod要素が一致するらしい
  - コンテキストの設定例（p39）

- ユニットの定義
  - 数値情報の単位を表現するために、報告書インスタンスにユニットを設定する
  - ユニットにはid属性（ユニットID）を設定し、measure要素を定義する
    - 勘定科目の金額を日本円で記載する場合
      - ユニットID: JPY
      - measure要素: iso4217:JPY
  - 定義したユニットを参照するために、unitRef属性を使用する
    - 例）日本円のユニットの参照: unitRef="JPY"　（ユニットID:JPYを参照）

- インラインXBRLファイルの作成
  - インラインXBRLではXHTMLで表現された内容に独自のタグを埋め込むことで、XBRLインスタンス内で表される要素を設定する
    - タグは「ix:」で始まる
    - 開始タグには必要に応じて属性を指定する
  - name属性
    - name属性に指定する値は、報告項目となる要素を指定する
    - 要素名の例
      - ix:nonFraction > 金額または数値を表現
      - ix:nonNumeric > 数値以外の文字列または文章を表現
      - ix:header > ヘッダ情報を定義
      - ix:hidden > 表示しない値を定義
      - ix:reference > スキーマ参照を定義
    - 数値を表現する要素「ix:nonFraction」 > p53
    - 数値以外の値を表現する要素「ix:nonNumeric」 > p57

- DEIの設定（p71）
  - DEIは、「Document and Entity Information」の略
  - 提出書類の基本情報（Document Information）と開示書類等提出者の基本情報（Entity Information）を含む
  - DEIは、表紙ファイルの「ix:hidden 要素」内に設定する
  - DEIのコンテキストIDは「FilingDateInstant」を利用する
  - 参照：「提出者別タクソノミ作成ガイドライン　添付5　様式ごとのDEIの設定対応一覧」

### 6章 マニュフェストファイルの作成
