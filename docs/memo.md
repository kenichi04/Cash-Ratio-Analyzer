## 開発用メモ
- EDINET 書類取得API用のテスト用docId: S100TGZR

## 「報告書インスタンス作成ガイドライン」より抜粋
- タグ情報について
　- 提出者別タクソノミの参照、ユニットの定義、コンテキストの定義、DEIの設定
    - 提出書類本文全体の場合、表紙ファイルに定義
    - 財務諸表本表のみの場合、本表の一つ目のファイルに定義
    - DEIの設定、提出者別タクソノミの参照、コンテキスト定義、ユニット定義は<ix:header>タグ内に指定
      - コンテキストの定義 > 報告する会計年度、報告主体などの定義
      - ユニットの定義 > 報告する通貨、株数等の単位を定義
- 財務諸表本表のみタグ付け対象とする場合、表紙のインラインXBRLファイルは作成しない
  - 以下でソースコードに落とし込みできそう
    - 表紙のインラインファイルあり > ここからタグ情報を取得
    - 表紙のインラインファイルなし > 本表の一つ目のファイルからタグ情報を取得
- 表紙ファイル名は、先頭の7桁数値と6文字が「0000000_header」と決まっている（0000000も固定らしい）ｘ
  - 先頭文字と、拡張子「_ixbrl.htl」で表紙ファイルを特定でそう
  - 本文の最初のファイルは「0101」は固定、多くは「0101010」になりそうだが断定はできない
    - 0101が複数あるかどうかでロジック組む？
- XBRLインスタンスファイル
  - インラインXBRLファイルをEDINET登録することで自動生成される
  - これを見れば必要な情報全部あるかも？ただし容量が大きい
- タクソノミの参照
  - スキーマファイルの参照 > schemaRef要素で指定
  - 拡張リンクロールの参照 > roleRef要素で指定
- コンテキストの定義（p30）
  - id属性 > コンテキストID
  - entity要素 > スキームおよび識別子
  - period要素 > 期間及び時点
  - scenario要素 > ディメンションを使用する場合の情報

## メモ
- Accountに登録する科目洗い出し
  - EDINETタクソノミの科目一覧ツリー確認
  - EDINETタクソノミ（語彙層）の語彙スキーマが基本か
  - 有価証券報告書ではEDINETタクソノミのうち以下が参照される？
    - 内閣府令タクソノミ、財務諸表本表タクソノミ、DEIタクソノミ
  - 提出者別タクソノミのスキーマファイル(.xsd)で参照先など確認できる
  　- スキーマファイル名で様式確認できる
  　- 各リンクファイル(xml)で名称や計算リンク
- 書類情報の確認方法
  - 様式ツリーで確認できそう
  - タクソノミ分割単位 > jpcrpで良さそう？
    - 財務諸表本表でjppfsもあるみたい
- EDINETタクソノミのフォルダ確認
  - jpcrp - {日付} - jpcrp_cor(rt)_{日付}.xsd > 語彙スキーマ, ロールタイプスキーマ


## TODO
- [ ] XBRL解析サービスにタグ情報取得処理を追加
  - [x] 表紙のインラインXBRLファイル有無で処理を分岐
- [ ] 通貨はユニット定義で取得できるため、FinancialData個別ではなく、FinancialDocumentに持たせる
- [ ] 会計年度をコンテキストの定義から取得する
- [ ] FinancialDataとAccountの関係見直し
- [ ] XbrlParserServiceのユニットテスト
- [ ] Edinetのバリデーション変更
  - E + 数字5桁

